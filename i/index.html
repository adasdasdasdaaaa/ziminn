<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>è‡ªæ°‘å…šã®å¾©æ´»</title>
<style>
  body, html { margin:0; padding:0; height:100%; font-family:sans-serif; overflow:hidden; }

  /* ã‚¿ã‚¤ãƒˆãƒ«ç”»é¢ */
  #titleScreen {
    position:absolute; width:100%; height:100%;
    background:url('https://th.bing.com/th/id/OIP.8qW0vDYC-GeJumzWmvYn6AHaHa?o=7rm=3&rs=1&pid=ImgDetMain&o=7&rm=3') no-repeat center center;
    background-size:cover;
    display:flex; flex-direction:column; justify-content:center; align-items:center; cursor:pointer;
  }
  #titleText { color:red; font-size:4em; font-weight:bold; text-shadow:2px 2px 4px black; }

  /* ã‚²ãƒ¼ãƒ ç”»é¢ */
  #gameScreen { display:none; height:100%; display:flex; flex-direction:row; }

  /* ãƒ¡ã‚¤ãƒ³è¡¨ç¤ºã‚¨ãƒªã‚¢ */
  #mainArea {
    flex:1; background:#f0f0f0; padding:50px; text-align:center;
  }

  #money { font-size:1.5em; margin-bottom:20px; }
  #slotDisplay { font-size:3em; height:60px; margin:20px; }

  /* ã‚µã‚¤ãƒ‰ãƒãƒ¼ */
  #sidebar { width:200px; background:#ddd; padding:20px; box-shadow:-2px 0 5px rgba(0,0,0,0.3); }
  #sidebar h2 { text-align:center; }
  #sidebar button { display:block; width:100%; margin:10px 0; font-size:1.2em; padding:10px; cursor:pointer; }
  #stopButton img { height:40px; }
</style>
</head>
<body>

<!-- ã‚¿ã‚¤ãƒˆãƒ«ç”»é¢ -->
<div id="titleScreen" onclick="startGame()">
  <div id="titleText">è‡ªæ°‘å…šã®å¾©æ´»</div>
  <p style="color:white; text-shadow:1px 1px 3px black;">ã‚¿ãƒƒãƒ—ã—ã¦ã‚¹ã‚¿ãƒ¼ãƒˆ</p>
</div>

<!-- ã‚²ãƒ¼ãƒ ç”»é¢ -->
<div id="gameScreen">
  <div id="mainArea">
    <p id="money">æ‰€æŒé‡‘: 1000å††</p>
    <div id="slotDisplay">ğŸ’ ğŸ’ ğŸ’</div>
    <p id="result"></p>
    <button id="stopButton" onclick="stopSlot()">
      <img src="https://tse2.mm.bing.net/th/id/OIP.iHtROv6QVl9NQDa2RHXl3QHaFj?rs=1&pid=ImgDetMain&o=7&rm=3">
    </button>
  </div>

  <div id="sidebar">
    <h2>ãƒ‘ãƒãƒ³ã‚³ä¸€è¦§</h2>
    <button onclick="selectSlot('3')">3å††ãƒ‘ãƒãƒ³ã‚³</button>
    <button onclick="selectSlot('100')">100å††ãƒ‘ãƒãƒ³ã‚³</button>
  </div>
</div>

<script>
let money = 1000;
const WIN_AMOUNT = 1000000;

let spinning = false;
let slotInterval = null;
let currentSlot = ["ğŸ’","ğŸ‹","ğŸ””","ğŸ‰","7"];
let selectedSlot = '3'; // é¸æŠä¸­ã®ãƒ‘ãƒãƒ³ã‚³
let slotConfig = {
  '3': { cost:3, winRate:0.3, reward:6 },
  '100': { cost:100, winRate:0.6, reward:300 }
};

function startGame() {
  document.getElementById("titleScreen").style.display="none";
  document.getElementById("gameScreen").style.display="flex";
  updateMoney();
}

// é¸æŠ
function selectSlot(type){
  selectedSlot = type;
  document.getElementById("result").innerText = type + "å††ãƒ‘ãƒãƒ³ã‚³ã‚’é¸æŠã—ã¾ã—ãŸ";
}

// æ›´æ–°æ‰€æŒé‡‘
function updateMoney() {
  document.getElementById("money").innerText = "æ‰€æŒé‡‘: " + money + "å††";
}

// ã‚¹ãƒ­ãƒƒãƒˆå›ã™
function startSlot() {
  if (spinning) return;
  let cfg = slotConfig[selectedSlot];
  if (money < cfg.cost) { document.getElementById("result").innerText="ãŠé‡‘ãŒè¶³ã‚Šã¾ã›ã‚“ï¼"; return; }
  money -= cfg.cost;
  updateMoney();
  spinning = true;
  document.getElementById("result").innerText="å›è»¢ä¸­â€¦è‡ªåˆ†ã§åœæ­¢ãƒœã‚¿ãƒ³ã‚’æŠ¼ã—ã¦ãã ã•ã„";
  slotInterval = setInterval(() => {
    const r1 = currentSlot[Math.floor(Math.random()*currentSlot.length)];
    const r2 = currentSlot[Math.floor(Math.random()*currentSlot.length)];
    const r3 = currentSlot[Math.floor(Math.random()*currentSlot.length)];
    document.getElementById("slotDisplay").innerText = `${r1} ${r2} ${r3}`;
  }, 100);
}

// åœæ­¢
function stopSlot(){
  if(!spinning) return;
  clearInterval(slotInterval);
  spinning = false;
  let cfg = slotConfig[selectedSlot];
  if(Math.random() < cfg.winRate){
    money += cfg.reward;
    document.getElementById("result").innerText = selectedSlot + "å††ãƒ‘ãƒãƒ³ã‚³å‹ã¡ï¼ +" + (cfg.reward - cfg.cost) + "å††";
  } else {
    document.getElementById("result").innerText = selectedSlot + "å††ãƒ‘ãƒãƒ³ã‚³è² ã‘â€¦ -" + cfg.cost + "å††";
  }
  updateMoney();
  checkGameEnd();
}

// çµ‚äº†åˆ¤å®š
function checkGameEnd(){
  if(money >= WIN_AMOUNT){ alert("ğŸ‰ è‡ªæ°‘å…šå¾©æ´»ï¼ã‚ãªãŸã®å‹åˆ©ã§ã™ï¼"); resetGame(); }
  else if(money < 0){ alert("ğŸ’¥ å€Ÿé‡‘ã§å´©å£Šâ€¦ã‚²ãƒ¼ãƒ ã‚ªãƒ¼ãƒãƒ¼"); resetGame(); }
}

// ãƒªã‚»ãƒƒãƒˆ
function resetGame(){
  money=1000;
  updateMoney();
  document.getElementById("slotDisplay").innerText="ğŸ’ ğŸ’ ğŸ’";
  document.getElementById("result").innerText="";
  document.getElementById("gameScreen").style.display="none";
  document.getElementById("titleScreen").style.display="flex";
}

// åˆæœŸè¡¨ç¤º
updateMoney();
</script>

</body>
</html>
