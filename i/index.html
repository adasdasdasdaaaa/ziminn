<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>自民党の復活</title>
<style>
  body, html { margin:0; padding:0; height:100%; font-family:sans-serif; overflow:hidden; }

  /* タイトル画面 */
  #titleScreen {
    position:absolute; width:100%; height:100%;
    background:url('https://th.bing.com/th/id/OIP.8qW0vDYC-GeJumzWmvYn6AHaHa?o=7rm=3&rs=1&pid=ImgDetMain&o=7&rm=3') no-repeat center center;
    background-size:cover;
    display:flex; flex-direction:column; justify-content:center; align-items:center; cursor:pointer;
  }
  #titleText { color:red; font-size:4em; font-weight:bold; text-shadow:2px 2px 4px black; }

  /* ゲーム画面 */
  #gameScreen { display:none; height:100%; display:flex; flex-direction:row; }

  /* メイン表示エリア */
  #mainArea {
    flex:1; background:#f0f0f0; padding:50px; text-align:center;
  }

  #money { font-size:1.5em; margin-bottom:20px; }
  #slotDisplay { font-size:3em; height:60px; margin:20px; }

  /* サイドバー */
  #sidebar { width:200px; background:#ddd; padding:20px; box-shadow:-2px 0 5px rgba(0,0,0,0.3); }
  #sidebar h2 { text-align:center; }
  #sidebar button { display:block; width:100%; margin:10px 0; font-size:1.2em; padding:10px; cursor:pointer; }
  #stopButton img { height:40px; }
</style>
</head>
<body>

<!-- タイトル画面 -->
<div id="titleScreen" onclick="startGame()">
  <div id="titleText">自民党の復活</div>
  <p style="color:white; text-shadow:1px 1px 3px black;">タップしてスタート</p>
</div>

<!-- ゲーム画面 -->
<div id="gameScreen">
  <div id="mainArea">
    <p id="money">所持金: 1000円</p>
    <div id="slotDisplay">🍒 🍒 🍒</div>
    <p id="result"></p>
    <button id="stopButton" onclick="stopSlot()">
      <img src="https://tse2.mm.bing.net/th/id/OIP.iHtROv6QVl9NQDa2RHXl3QHaFj?rs=1&pid=ImgDetMain&o=7&rm=3">
    </button>
  </div>

  <div id="sidebar">
    <h2>パチンコ一覧</h2>
    <button onclick="selectSlot('3')">3円パチンコ</button>
    <button onclick="selectSlot('100')">100円パチンコ</button>
  </div>
</div>

<script>
let money = 1000;
const WIN_AMOUNT = 1000000;

let spinning = false;
let slotInterval = null;
let currentSlot = ["🍒","🍋","🔔","🍉","7"];
let selectedSlot = '3'; // 選択中のパチンコ
let slotConfig = {
  '3': { cost:3, winRate:0.3, reward:6 },
  '100': { cost:100, winRate:0.6, reward:300 }
};

function startGame() {
  document.getElementById("titleScreen").style.display="none";
  document.getElementById("gameScreen").style.display="flex";
  updateMoney();
}

// 選択
function selectSlot(type){
  selectedSlot = type;
  document.getElementById("result").innerText = type + "円パチンコを選択しました";
}

// 更新所持金
function updateMoney() {
  document.getElementById("money").innerText = "所持金: " + money + "円";
}

// スロット回す
function startSlot() {
  if (spinning) return;
  let cfg = slotConfig[selectedSlot];
  if (money < cfg.cost) { document.getElementById("result").innerText="お金が足りません！"; return; }
  money -= cfg.cost;
  updateMoney();
  spinning = true;
  document.getElementById("result").innerText="回転中…自分で停止ボタンを押してください";
  slotInterval = setInterval(() => {
    const r1 = currentSlot[Math.floor(Math.random()*currentSlot.length)];
    const r2 = currentSlot[Math.floor(Math.random()*currentSlot.length)];
    const r3 = currentSlot[Math.floor(Math.random()*currentSlot.length)];
    document.getElementById("slotDisplay").innerText = `${r1} ${r2} ${r3}`;
  }, 100);
}

// 停止
function stopSlot(){
  if(!spinning) return;
  clearInterval(slotInterval);
  spinning = false;
  let cfg = slotConfig[selectedSlot];
  if(Math.random() < cfg.winRate){
    money += cfg.reward;
    document.getElementById("result").innerText = selectedSlot + "円パチンコ勝ち！ +" + (cfg.reward - cfg.cost) + "円";
  } else {
    document.getElementById("result").innerText = selectedSlot + "円パチンコ負け… -" + cfg.cost + "円";
  }
  updateMoney();
  checkGameEnd();
}

// 終了判定
function checkGameEnd(){
  if(money >= WIN_AMOUNT){ alert("🎉 自民党復活！あなたの勝利です！"); resetGame(); }
  else if(money < 0){ alert("💥 借金で崩壊…ゲームオーバー"); resetGame(); }
}

// リセット
function resetGame(){
  money=1000;
  updateMoney();
  document.getElementById("slotDisplay").innerText="🍒 🍒 🍒";
  document.getElementById("result").innerText="";
  document.getElementById("gameScreen").style.display="none";
  document.getElementById("titleScreen").style.display="flex";
}

// 初期表示
updateMoney();
</script>

</body>
</html>
