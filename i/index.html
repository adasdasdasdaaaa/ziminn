<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>è‡ªæ°‘å…šã®å¾©æ´» - ã‚¹ãƒ­ãƒƒãƒˆæ¼”å‡ºä»˜ã</title>
<style>
  body, html {
    margin: 0; padding: 0; font-family: sans-serif; height: 100%;
  }

  #titleScreen {
    position: absolute;
    width: 100%; height: 100%;
    background: url('https://th.bing.com/th/id/OIP.8qW0vDYC-GeJumzWmvYn6AHaHa?o=7rm=3&rs=1&pid=ImgDetMain&o=7&rm=3') no-repeat center center;
    background-size: cover;
    display: flex; flex-direction: column; justify-content: center; align-items: center;
    cursor: pointer;
  }
  #titleText { color:red; font-size:4em; font-weight:bold; text-shadow:2px 2px 4px black; }

  #gameScreen { display:none; height:100%; display:flex; flex-direction:column; align-items:center; padding-top:50px; background:#f0f0f0; }
  #money { font-size:1.5em; margin-bottom:20px; }
  #slotDisplay { font-size:3em; margin:20px; height:60px; }
  button { font-size:1.2em; padding:10px 20px; margin:5px; cursor:pointer; }
</style>
</head>
<body>

<div id="titleScreen" onclick="startGame()">
  <div id="titleText">è‡ªæ°‘å…šã®å¾©æ´»</div>
  <p style="color:white; text-shadow:1px 1px 3px black;">ã‚¿ãƒƒãƒ—ã—ã¦ã‚¹ã‚¿ãƒ¼ãƒˆ</p>
</div>

<div id="gameScreen">
  <p id="money">æ‰€æŒé‡‘: 1000å††</p>
  <div id="slotDisplay">ğŸ’ ğŸ’ ğŸ’</div>
  <button id="startButton" onclick="startSlot()">å›ã™</button>
  <button id="stopButton" onclick="stopSlot()">
    <img src="https://tse2.mm.bing.net/th/id/OIP.iHtROv6QVl9NQDa2RHXl3QHaFj?rs=1&pid=ImgDetMain&o=7&rm=3" style="height:40px;">
  </button>
  <p id="result"></p>
</div>

<script>
let money = 1000;
const WIN_AMOUNT = 1000000;
let slotInterval = null;
let currentSlot = ["ğŸ’","ğŸ‹","ğŸ””","ğŸ‰","7"];
let spinning = false;

function startGame() {
  document.getElementById("titleScreen").style.display = "none";
  document.getElementById("gameScreen").style.display = "flex";
  updateMoney();
}

// æ›´æ–°æ‰€æŒé‡‘
function updateMoney() {
  document.getElementById("money").innerText = "æ‰€æŒé‡‘: " + money + "å††";
}

// ã‚¹ãƒ­ãƒƒãƒˆé–‹å§‹
function startSlot() {
  if (spinning) return; // ã™ã§ã«å›ã£ã¦ã‚‹
  if (money < 3) { document.getElementById("result").innerText="ãŠé‡‘ãŒè¶³ã‚Šã¾ã›ã‚“ï¼"; return; }
  money -= 3;
  updateMoney();
  spinning = true;
  document.getElementById("result").innerText="å›è»¢ä¸­â€¦è‡ªåˆ†ã§åœæ­¢ãƒœã‚¿ãƒ³ã‚’æŠ¼ã—ã¦ãã ã•ã„";
  slotInterval = setInterval(() => {
    const r1 = currentSlot[Math.floor(Math.random()*currentSlot.length)];
    const r2 = currentSlot[Math.floor(Math.random()*currentSlot.length)];
    const r3 = currentSlot[Math.floor(Math.random()*currentSlot.length)];
    document.getElementById("slotDisplay").innerText = `${r1} ${r2} ${r3}`;
  }, 100);
}

// ã‚¹ãƒ­ãƒƒãƒˆåœæ­¢
function stopSlot() {
  if (!spinning) return;
  clearInterval(slotInterval);
  spinning = false;

  // å‹ã¡åˆ¤å®šï¼š30%ã®ç¢ºç‡
  if (Math.random() < 0.3) {
    money += 6;
    document.getElementById("result").innerText="å‹ã¡ï¼ +3å††";
  } else {
    document.getElementById("result").innerText="è² ã‘â€¦ -3å††";
  }
  updateMoney();
  checkGameEnd();
}

// ã‚²ãƒ¼ãƒ çµ‚äº†åˆ¤å®š
function checkGameEnd() {
  if (money >= WIN_AMOUNT) { alert("ğŸ‰ è‡ªæ°‘å…šå¾©æ´»ï¼ã‚ãªãŸã®å‹åˆ©ã§ã™ï¼"); resetGame(); }
  else if (money < 0) { alert("ğŸ’¥ å€Ÿé‡‘ã§å´©å£Šâ€¦ã‚²ãƒ¼ãƒ ã‚ªãƒ¼ãƒãƒ¼"); resetGame(); }
}

// ãƒªã‚»ãƒƒãƒˆ
function resetGame() {
  money=1000;
  updateMoney();
  document.getElementById("result").innerText="";
  document.getElementById("slotDisplay").innerText="ğŸ’ ğŸ’ ğŸ’";
  document.getElementById("gameScreen").style.display="none";
  document.getElementById("titleScreen").style.display="flex";
}
</script>

</body>
</html>
